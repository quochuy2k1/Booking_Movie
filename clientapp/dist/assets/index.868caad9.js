import{bF as xe,au as X,av as u,R as T,r as a,ca as fe,z as c,F as L,B as F,j as e,I as me,b7 as Ee,ae as o,aD as g,cb as Be,an as Ce,cc as Ie,aq as K,ce as Me}from"./styles.3449b18f.js";import{u as ve,v as ne,w as ie,x as le,y as oe,J as Te,z as k,E as De,B as se,G as re,H as J,M as He,K as ze,n as Ue,N as Re,P as Ve,Q as je,R as _e,U as qe,V as Qe,A as Ge,q as Ke}from"./admin.23e9f2fc.js";const Xe=".jpg, .png, image/*",Le=()=>{const n=xe(),A=X(),E=ve(n.breakpoints.down("md"));localStorage.getItem("token");const d=u(l=>l.actor.status),x=u(l=>l.actor.error),[h,C]=T.useState(!1),[S,O]=a.exports.useState(""),[v,D]=a.exports.useState(""),[w,b]=a.exports.useState(""),[y,H]=a.exports.useState(0),[B,Q]=a.exports.useState(""),[z,U]=a.exports.useState(""),[N,I]=a.exports.useState(!1),[M,R]=a.exports.useState(null),[V,j]=a.exports.useState(null),P=T.useRef(null),[i,f]=a.exports.useState(!1),G=u(l=>l.nationality.nationalities),_=u(l=>l.nationality.status),[$,W]=a.exports.useState();a.exports.useEffect(()=>{d==="added"?(O("Th\xEAm th\xE0nh c\xF4ng"),C(!0),A(fe())):d==="failed"&&(O(x),C(!0))},[A,d]);const Y=a.exports.useMemo(()=>()=>{f(!0);const l=[...G].map(s=>({key:s.id,text:s.name,value:s.id}));W(l)},[G]),q=()=>{f(!1)},Z=()=>{f(!1)},ee=()=>{console.log(w,y,B,z,N,V)},te=(l,s)=>{j(s.value)},m=(l,s)=>{s!=="clickaway"&&C(!1)};return c(L,{children:[c(F,{icon:!0,color:"blue",onClick:Y,labelPosition:"right",children:[e(me,{name:"add"})," Th\xEAm m\u1EDBi"]}),c(ne,{fullScreen:E,open:i,onClose:q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(ie,{id:"alert-dialog-title",className:"text-3xl font-semibold",children:"Th\xEAm m\u1EDBi phim"}),c(le,{children:[e(oe,{id:"alert-dialog-description",children:"Khi th\xEAm m\u1EDBi b\u1ED9 phim s\u1EBD th\xEAm m\u1EDBi"}),e(Ee,{className:"pt-5",children:c(o,{size:"small",children:[e(o.Field,{children:e(g,{icon:"id badge",iconPosition:"left",label:{tag:!0,content:"T\xEAn"},labelPosition:"right",placeholder:"Nh\u1EADp t\xEAn",onChange:(l,s)=>{b(s.value),D(Te(s.value))}})}),e(o.Field,{children:e(g,{icon:"amilia",iconPosition:"left",label:{tag:!0,content:"B\xED danh (Alias)"},labelPosition:"right",placeholder:"Nh\u1EADp b\xED danh",value:v,onChange:(l,s)=>{D(s.value)}})}),e(o.Field,{children:e(g,{icon:"time",iconPosition:"left",label:{tag:!0,content:"Th\u1EDDi l\u01B0\u1EE3ng (ph\xFAt)"},labelPosition:"right",placeholder:"Nh\u1EADp th\u1EDDi l\u01B0\u1EE3ng",type:"number",value:y,onChange:(l,s)=>{H(Number.parseInt(s.value))}})}),e(o.Field,{children:e(g,{icon:"calendar alternate",iconPosition:"left",label:{tag:!0,content:"Ng\xE0y c\xF4ng chi\u1EBFu"},labelPosition:"right",placeholder:"Ng\xE0y c\xF4ng chi\u1EBFu",type:"date",value:B,onChange:(l,s)=>{Q(s.value)}})}),e(o.Field,{children:e(g,{icon:"file image",iconPosition:"left",label:{tag:!0,content:"H\xECnh \u1EA3nh"},labelPosition:"right",placeholder:"H\xECnh \u1EA3nh",type:"file",accept:Xe,onChange:(l,s)=>{R(l.target.files[0]),console.log(l.target.files[0],"imgage")}})}),e(o.Field,{children:e(k,{loading:_==="loading",placeholder:"Ch\u1ECDn qu\u1ED1c gia",selection:!0,search:!0,dataOption:$,onSelectChange:te})}),e(o.Field,{children:e(De,{apiKey:"yillg49dt4io6vjxyvs8k26ldhgtxqnmurmteil8v2j6mljb",onInit:(l,s)=>P.current=s,initialValue:"<p>Nh\u1EADp ti\u1EC3u s\u1EED.</p>",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onEditorChange:l=>{U(l)}})})]})})]}),c(se,{children:[e(F,{color:"blue",onClick:ee,children:"X\xE1c nh\u1EADn l\u01B0u"}),e(F,{color:"red",onClick:Z,autoFocus:!0,children:"Hu\u1EF7 b\u1ECF l\u01B0u"})]})]}),e(re,{open:h,anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:6e3,onClose:m,children:e(J,{onClose:m,severity:x?"error":d==="added"?"success":void 0,sx:{width:"100%"},children:S})})]})},Je=({id:n})=>{const A=X(),[E,d]=T.useState(!1),x=localStorage.getItem("token"),h=()=>{n.length===0?v(!0):d(!0)},C=()=>{d(!1)},S=()=>{d(!1)},[O,v]=T.useState(!1),D=(b,y)=>{y!=="clickaway"&&v(!1)};return c(L,{children:[c(F,{icon:!0,color:"red",onClick:h,labelPosition:"right",children:[e(me,{name:"delete"})," Xo\xE1 nhi\u1EC1u"]}),c(ne,{open:E,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(ie,{id:"alert-dialog-title",className:"text-xl font-bold",children:"B\u1EA1n c\xF3 th\u1EF1c s\u1EF1 mu\u1ED1n xo\xE1?"}),e(le,{children:e(oe,{id:"alert-dialog-description",className:"text-lg",children:"H\xE0ng b\u1EA1n mu\u1ED1n xo\xE1 l\xE0"})}),c(se,{children:[e(F,{color:"red",onClick:S,children:"Hu\u1EF7 b\u1ECF xo\xE1"}),e(F,{color:"blue",onClick:()=>{n.length>0&&(A(Be({id:n,token:x})),d(!1))},autoFocus:!0,children:"X\xE1c nh\u1EADn xo\xE1"})]})]}),e(re,{anchorOrigin:{horizontal:"center",vertical:"top"},open:O,autoHideDuration:6e3,onClose:D,children:e(J,{onClose:D,variant:"filled",severity:"error",sx:{width:"100%"},children:"Vui l\xF2ng ch\u1ECDn d\xF2ng c\u1EA7n xo\xE1."})})]})},ge=".jpg, .png, image/*",$e="video/*",We=[{key:1,text:"Phim \u0111ang chi\u1EBFu",value:!0},{key:2,text:"Phim s\u1EAFp chi\u1EBFu",value:!1}],Ye=n=>{var he,pe;const A=xe(),E=X(),d=ve(A.breakpoints.down("md")),x=u(t=>t.movie.error),h=u(t=>t.movie.status);localStorage.getItem("token");const[C,S]=a.exports.useState(n.name),[O,v]=a.exports.useState(n.duration),[D,w]=a.exports.useState(Ce(n.releaseDate).toISOString().substring(0,10)),[b,y]=a.exports.useState(n.content),[H,B]=a.exports.useState(!1);a.exports.useState(null);const[Q,z]=a.exports.useState(null),U=T.useRef(null),[N,I]=a.exports.useState(n.isOpen),M=u(t=>t.category.categories),R=u(t=>t.category.status),[V,j]=a.exports.useState([]),P=u(t=>t.nationality.nationalities),i=u(t=>t.nationality.status),[f,G]=a.exports.useState([]),_=u(t=>t.producer.producers),$=u(t=>t.producer.status),[W,Y]=a.exports.useState([]),q=u(t=>t.director.directors),Z=u(t=>t.director.status),[ee,te]=a.exports.useState([]),m=u(t=>t.actor.actors),l=u(t=>t.actor.status),[s,be]=a.exports.useState([]),[ye,ce]=a.exports.useState(""),[Ae,ae]=T.useState(!1);a.exports.useCallback(async()=>await Ie(),[]);const de=a.exports.useMemo(()=>()=>{const t=[...m].map(r=>({key:r.id,text:r.name,value:r.id}));be(t);const p=[...M].map(r=>({key:r.id,text:r.name,value:r.id}));j(p);const Ne=[..._].map(r=>({key:r.id,text:r.name,value:r.id}));Y(Ne);const Pe=[...q].map(r=>({key:r.id,text:r.name,value:r.id}));te(Pe);const we=[...P].map(r=>({key:r.id,text:r.name,value:r.id}));G(we)},[]);a.exports.useEffect(()=>{N&&de(),h==="updated"?(ce("C\u1EADp nh\u1EADp th\xE0nh c\xF4ng"),ae(!0),E(fe())):h==="failed"&&(ce(x),ae(!0)),console.log(n.producer,"inside useeffect")},[h,E,de]);const Se=()=>{I(!1),n.setOpenUpdateMovie(!1)},ke=()=>{I(!1),n.setOpenUpdateMovie(!1)},Fe=()=>{console.log(n.actors.split(", "),"actors props"),console.log(m&&m.length>0&&(m==null?void 0:m.filter(t=>n.actors.split(", ").indexOf(t.name)>-1).map(t=>t.id)),"hihi")},Oe=(t,p)=>{z(p.value)},ue=(t,p)=>{p!=="clickaway"&&ae(!1)};return c(L,{children:[c(ne,{fullScreen:d,open:N,onClose:Se,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[c(ie,{id:"alert-dialog-title",className:"text-3xl font-semibold",children:['C\u1EADp nh\u1EADt phim "',e("span",{style:{color:"#f97316"},children:n.name}),'"']}),c(le,{children:[e(oe,{id:"alert-dialog-description",children:"Khi c\u1EADp nh\u1EADt b\u1ED9 phim s\u1EBD c\u1EADp nh\u1EADt"}),e(Ee,{className:"pt-5",children:c(o,{size:"small",children:[e(o.Field,{children:e(g,{icon:"id badge",iconPosition:"left",label:{tag:!0,content:"T\xEAn"},labelPosition:"right",placeholder:"Nh\u1EADp t\xEAn",value:C})}),e(o.Field,{children:e(g,{icon:"amilia",iconPosition:"left",label:{tag:!0,content:"B\xED danh (Alias)"},labelPosition:"right",placeholder:"Nh\u1EADp b\xED danh"})}),e(o.Field,{children:e(g,{icon:"time",iconPosition:"left",label:{tag:!0,content:"Th\u1EDDi l\u01B0\u1EE3ng (ph\xFAt)"},labelPosition:"right",placeholder:"Nh\u1EADp th\u1EDDi l\u01B0\u1EE3ng",type:"number",value:O,onChange:(t,p)=>{v(Number.parseInt(p.value))}})}),e(o.Field,{children:e(g,{icon:"calendar alternate",iconPosition:"left",label:{tag:!0,content:"Ng\xE0y c\xF4ng chi\u1EBFu"},labelPosition:"right",placeholder:"Ng\xE0y c\xF4ng chi\u1EBFu",type:"date",value:D,onChange:(t,p)=>{w(p.value)}})}),e(o.Field,{children:e(g,{icon:"file image",iconPosition:"left",label:{tag:!0,content:"H\xECnh review"},labelPosition:"right",placeholder:"H\xECnh review",type:"file",accept:ge})}),e(o.Field,{children:e(g,{icon:"file image",iconPosition:"left",label:{tag:!0,content:"H\xECnh background"},labelPosition:"right",placeholder:"H\xECnh background",accept:ge,type:"file"})}),e(o.Field,{children:e(g,{icon:"file video",iconPosition:"left",label:{tag:!0,content:"Video trailer"},labelPosition:"right",placeholder:"Video trailer",type:"file",accept:$e})}),e(o.Field,{children:e(k,{loading:R==="loading",placeholder:"Ch\u1ECDn danh m\u1EE5c phim",multiple:!0,selection:!0,search:!0,dataOption:V,defaultValue:M&&M.filter(t=>n.categories.split(", ").indexOf(t.name)>-1).map(t=>t.id)})}),e(o.Field,{children:e(k,{loading:l==="loading",placeholder:"Ch\u1ECDn di\u1EC5n vi\xEAn",multiple:!0,selection:!0,search:!0,dataOption:s,defaultValue:m&&m.filter(t=>n.actors.split(", ").indexOf(t.name)>-1).map(t=>t.id)})}),e(o.Field,{children:e(k,{loading:Z==="loading",placeholder:"Ch\u1ECDn \u0111\u1EA1o di\u1EC5n",multiple:!0,selection:!0,search:!0,dataOption:ee,defaultValue:q&&q.filter(t=>n.directors.split(", ").indexOf(t.name)>-1).map(t=>t.id)})}),e(o.Field,{children:e(k,{loading:$==="loading",placeholder:"Ch\u1ECDn nh\xE0 s\u1EA3n xu\u1EA5t",selection:!0,search:!0,dataOption:W,defaultValue:_&&((he=_.find(t=>n.producer===t.name))==null?void 0:he.id)})}),e(o.Field,{children:e(k,{loading:i==="loading",placeholder:"Ch\u1ECDn qu\u1ED1c gia",selection:!0,search:!0,dataOption:f,defaultValue:P&&((pe=P.find(t=>n.nationality===t.name))==null?void 0:pe.id),onSelectChange:Oe})}),e(o.Field,{children:e(k,{placeholder:"Tr\u1EA1ng th\xE1i",selection:!0,dataOption:We,defaultValue:n.status,onSelectChange:(t,p)=>B(p.value)})}),e(o.Field,{children:e(De,{apiKey:"yillg49dt4io6vjxyvs8k26ldhgtxqnmurmteil8v2j6mljb",onInit:(t,p)=>U.current=p,initialValue:b||"<p>Nh\u1EADp n\u1ED9i dung phim.</p>",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onEditorChange:t=>{y(t)}})})]})})]}),c(se,{children:[e(F,{color:"blue",onClick:Fe,children:"X\xE1c nh\u1EADn l\u01B0u"}),e(F,{color:"red",onClick:ke,autoFocus:!0,children:"Hu\u1EF7 b\u1ECF l\u01B0u"})]})]}),e(re,{open:Ae,anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:6e3,onClose:ue,children:e(J,{onClose:ue,severity:x?"error":h==="updated"?"success":void 0,sx:{width:"100%"},children:ye})})]})},Ze=[{field:"id",headerName:"ID",flex:1},{field:"image",headerName:"H\xECnh \u1EA3nh",width:80,renderCell:n=>e(Ge,{src:n.value,variant:"rounded"})},{field:"name",headerName:"T\xEAn di\u1EC5n vi\xEAn",flex:1},{field:"viewCount",headerName:"S\u1ED1 l\u01B0\u1EE3ng ng\u01B0\u1EDDi xem",width:120},{field:"dateOfBirth",headerName:"Ng\xE0y sinh",type:"dateTime",flex:1,renderCell:n=>Ce(n.value).format("DD/MM/yyyy")},{field:"height",headerName:"Chi\u1EC1u cao",type:"string",flex:1},{field:"nationalityId",headerName:"Qu\u1ED1c gia",type:"string",flex:1}],et=[{key:"all",value:"all",text:"T\u1EA5t c\u1EA3"},{key:"en",value:"en",text:"M\u1EF9",flag:"us"},{key:"au",value:"au",text:"\xDAc",flag:"au"},{key:"zh",value:"zh",text:"Trung Qu\u1ED1c",flag:"cn"},{key:"ko",value:"ko",text:"H\xE0n Qu\u1ED1c",flag:"kr"},{key:"vi",value:"vi",text:"Vi\u1EC7t Nam",flag:"vn"}];function tt(n){return e(L,{children:e(Ke,{sx:{color:"#fafafa","&.Mui-checked":{color:"#fafafa"}},...n})})}const it=()=>{const n=X(),{status:A,actors:E,total:d,error:x}=u(i=>i.actor),[h,C]=a.exports.useState(1),[S,O]=a.exports.useState(0),[v,D]=a.exports.useState("all"),[w,b]=a.exports.useState(!1),[y,H]=a.exports.useState(d||0),[B,Q]=a.exports.useState([]),[z,U]=a.exports.useState(),[N,I]=a.exports.useState(!1);a.exports.useEffect(()=>{E.length<=0&&n(K({PageIndex:S,PageSize:h})),H(i=>d!==void 0?d:i),x&&b(!0),console.log(y,"      ",d,"rowCountState")},[n,d,H,x,b,E.length]);const M=a.exports.useMemo(()=>i=>{console.log(i,"page index"),n(K({PageIndex:i,PageSize:h,Nationality:v}))},[n,h]),R=i=>{I(i)},V=i=>{I(!0),U(i.row)},j=(i,f)=>{Q(i),console.log(i,f,"seletion data grid")},P=(i,f)=>{D(f.value),console.log(f.value,"data dropdown"),n(K({PageIndex:S,PageSize:h,Nationality:f.value}))};return c(He,{title:"Qu\u1EA3n l\xFD di\u1EC5n vi\xEAn",children:[e("div",{children:e(ze,{in:w,children:e(J,{variant:"filled",severity:"error",action:e(Ue,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{b(!1),n(Me())},children:e(Re,{fontSize:"inherit"})}),sx:{mb:2},children:x})})}),c("div",{className:"py-2",children:[e(Le,{}),N&&e(Ye,{...z,setOpenUpdateMovie:R,isOpen:N}),e(Je,{id:B})]}),e(Ve,{elevation:1,square:!0,className:"p-5 my-1",children:e("div",{className:"flex",children:c("span",{className:"font-semibold",children:["Qu\u1ED1c gia"," ",e(k,{inline:!0,dataOption:et,onSelectChange:P})]})})}),e("div",{style:{height:400,width:"100%"},children:e(je,{sx:{".MuiDataGrid-columnHeader":{backgroundColor:"#333",color:"#fff"}},loading:A==="loading",rows:E,columns:Ze,pageSize:h,rowsPerPageOptions:[1,3,5,10,20,50,100],onPageSizeChange:i=>{C(i),n(K({PageIndex:S,PageSize:i,Nationality:v}))},pagination:!0,paginationMode:"server",checkboxSelection:!0,onPageChange:M,rowCount:y,onSelectionModelChange:j,components:{BaseCheckbox:tt,Toolbar:_e,LoadingOverlay:qe},localeText:Qe,getCellClassName:i=>i.field==="image"||i.field==="id"||i.field==="name"||i.field==="viewCount"||i.field==="dateOfBirth"||i.field==="nationalityId"||i.field==="height"||i.value==null?"":"bg-blue-400",onRowClick:V})})]})};export{it as default};
